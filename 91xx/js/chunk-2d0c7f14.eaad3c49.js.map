{"version":3,"sources":["webpack:///./src/components/user/login.vue?72b3","webpack:///./src/components/user/login.vue","webpack:///./src/components/user/login.vue?569f","webpack:///./src/components/user/login.vue?263e"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","_v","_s","$web_conf","application_name","attrs","directives","name","rawName","value","user","expression","domProps","on","$event","target","composing","$set","_m","submit_loading","on_submit","_e","staticRenderFns","data","referrer","created","$store","state","hasLogin","$router","replace","window","_t","document","beforeRouteEnter","to","from","next","vm","path","methods","username","length","$message","theme","position","duration","password","post_data","$axios","post","then","response","loading","response_data","userinfo","token","commit","push","catch","error","component"],"mappings":"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","file":"js/chunk-2d0c7f14.eaad3c49.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"row\"},[_c('div',{staticClass:\"col\"}),_c('div',{staticClass:\"col-md-5\"},[_c('div',{staticClass:\"card card-l6\"},[_c('div',{staticClass:\"card-body\"},[_c('div',{staticClass:\"card-title\"},[_vm._v(\"登录 \"+_vm._s(_vm.$web_conf.application_name))]),_c('form',{staticClass:\"new_user\",attrs:{\"id\":\"new_user\",\"action\":\"/account/sign_in\",\"accept-charset\":\"UTF-8\",\"method\":\"post\"}},[_c('div',{staticClass:\"form-group\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.user.username),expression:\"user.username\"}],staticClass:\"form-control form-control-lg\",attrs:{\"placeholder\":\"用户名 / Email\",\"type\":\"text\",\"name\":\"user[login]\",\"id\":\"user_login\"},domProps:{\"value\":(_vm.user.username)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.user, \"username\", $event.target.value)}}})]),_c('div',{staticClass:\"form-group\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.user.password),expression:\"user.password\"}],staticClass:\"form-control form-control-lg\",attrs:{\"type\":\"password\",\"placeholder\":\"密码\",\"name\":\"user[password]\",\"id\":\"user_password\"},domProps:{\"value\":(_vm.user.password)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.user, \"password\", $event.target.value)}}})]),_vm._m(0),_c('div',{staticClass:\"form-actions\"},[_c('input',{staticClass:\"btn btn-primary btn-lg btn-block\",attrs:{\"disabled\":_vm.submit_loading,\"type\":\"submit\",\"name\":\"commit\",\"value\":\"登录\"},on:{\"click\":_vm.on_submit}})])])])]),(false)?_c('div',{staticClass:\"card omniauth-buttons\"},[_c('div',{staticClass:\"card-header\"},[_vm._v(\"用其他平台的账号登录\")]),_vm._m(1)]):_vm._e()]),_vm._m(2),_c('div',{staticClass:\"col\"})])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"form-group\"},[_c('div',{staticClass:\"custom-control custom-checkbox\"},[_c('input',{attrs:{\"name\":\"user[remember_me]\",\"type\":\"hidden\",\"value\":\"0\"}}),_c('input',{staticClass:\"custom-control-input\",attrs:{\"type\":\"checkbox\",\"value\":\"1\",\"name\":\"user[remember_me]\",\"id\":\"user_remember_me\"}}),_c('label',{staticClass:\"custom-control-label\",attrs:{\"for\":\"user_remember_me\"}},[_vm._v(\"记住登录状态\")])])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"card-body flex aic jcc\"},[_c('a',{staticClass:\"btn btn-default omniauth-github\",attrs:{\"rel\":\"nofollow\",\"data-method\":\"post\",\"href\":\"/account/auth/github\"}},[_c('i',{staticClass:\"fab fa-github\"}),_vm._v(\" GitHub\")]),_c('a',{staticClass:\"btn btn-default omniauth-twitter\",attrs:{\"rel\":\"nofollow\",\"data-method\":\"post\",\"href\":\"/account/auth/twitter\"}},[_c('i',{staticClass:\"fab fa-twitter\"}),_vm._v(\" Twitter\")])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"col-md-3\"},[_c('div',{staticClass:\"card\"},[_c('ul',{staticClass:\"list-group list-group-flush\"},[_c('li',{staticClass:\"list-group-item\"},[_c('a',{attrs:{\"href\":\"/account/register\"}},[_vm._v(\"注册\")])]),_c('li',{staticClass:\"list-group-item\"},[_c('a',{attrs:{\"href\":\"/account/forgot\"}},[_vm._v(\"忘记了密码?\")])])])])])}]\n\nexport { render, staticRenderFns }","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\nimport '../../assets/css/user.css'\n\nexport default {\n  name: 'login',\n  data() {\n    return {\n      submit_loading: false,\n      user: {},\n      referrer: ''\n    }\n  },\n  created() {\n    if (this.$store.state.hasLogin) {\n      return this.$router.replace('/');\n    }\n    window._t = this;\n    console.log('document.referrer:', document.referrer);\n    console.log('this.$router', this.$router);\n    if (document.referrer) {\n      this.referrer = document.referrer;\n    }\n  },\n  beforeRouteEnter(to, from, next) {\n    next(vm => {\n      vm.referrer = from.path\n      console.log(\"from:\", from);\n    })\n  },\n  methods: {\n    on_submit: function () {\n\n      if (!this.user.username || this.user.username.length < 4) {\n        return this.$message('用户名过短,不少于4位', {\n          theme: \"error\",\n          position: \"top-left\",\n          duration: 5000\n        });\n      }\n\n      if (!this.user.password || this.user.password.length <= 6) {\n        return this.$message('密码过短，不能少于6位', {\n          theme: \"error\",\n          position: \"top-left\",\n          duration: 5000\n        });\n      }\n\n      this.submit_loading = true;\n      var post_data = this.user\n      post_data.referrer = this.referrer;\n\n      this.$axios.post('/app/user/login', post_data).then((response) => {\n        this.loading = false;\n        var response_data = response.data;\n        console.log(\"response_data:\", response_data)\n\n        var userinfo = response_data.user;\n        var token = response_data.token;\n        this.$message('登录成功，正在跳转', {\n          theme: \"normal\",\n          position: \"top-left\",\n          duration: 5000\n        });\n\n        this.$store.commit('login', {\n          'userinfo': userinfo,\n          'token': token\n        });\n        if (!this.referrer) {\n          this.referrer = '/'\n        }\n        console.log('this.referrer:', this.referrer);\n        this.$router.push(this.referrer);\n      }).catch((error) => {\n        console.log('error:', error);\n        this.submit_loading = false;\n\n      });\n      return false;\n    }\n  }\n\n}\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vue-cli-plugin-quasar/lib/loader.auto-import.js?kebab!../../../node_modules/cache-loader/dist/cjs.js??ref--0-1!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./login.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vue-cli-plugin-quasar/lib/loader.auto-import.js?kebab!../../../node_modules/cache-loader/dist/cjs.js??ref--0-1!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./login.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./login.vue?vue&type=template&id=ae4c2b2a&\"\nimport script from \"./login.vue?vue&type=script&lang=js&\"\nexport * from \"./login.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}